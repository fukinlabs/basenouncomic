# Flow ‡∏Å‡∏≤‡∏£ Mint ‡πÉ‡∏ô Farcaster Mini App

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

**‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ‡∏ú‡πà‡∏≤‡∏ô Farcaster Mini App ‚Üí Mint ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Sign In!**

---

## üîÑ Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô Farcaster Mini App (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

1. **‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏≠‡∏õ‡πÉ‡∏ô Farcaster**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Farcaster app
   - ‡∏Ñ‡∏•‡∏¥‡∏Å Mini App link ‡∏´‡∏£‡∏∑‡∏≠ embed

2. **SDK ‡∏î‡∏∂‡∏á FID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥**
   ```typescript
   // app/mint/page.tsx ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 175-213
   const ctx = await sdk.context;
   if (ctx?.user?.fid) {
     setFid(ctx.user.fid.toString()); // ‚úÖ ‡πÑ‡∏î‡πâ FID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
   }
   ```

3. **‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏° Mint ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ**
   ```typescript
   // ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1415
   (!isSignedOut && fid && (isSignedIn || isInMiniApp))
   // ‚úÖ ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ FID ‡πÅ‡∏•‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Mini App ‚Üí ‡πÅ‡∏™‡∏î‡∏á Mint button
   ```

4. **Mint ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!**
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Sign In
   - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á verify signature
   - ‡πÉ‡∏ä‡πâ FID ‡∏à‡∏≤‡∏Å SDK context ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

---

### ‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô Browser ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤

1. **‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Browser**
   - ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://farcasterabstact.wtf/mint

2. **SDK ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á FID ‡πÑ‡∏î‡πâ**
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ context ‡∏à‡∏≤‡∏Å Farcaster
   - `isInMiniApp = false`

3. **‡∏ï‡πâ‡∏≠‡∏á Sign In ‡∏Å‡πà‡∏≠‡∏ô**
   - ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "SIGN IN FARCASTER"
   - Verify signature
   - ‡πÑ‡∏î‡πâ FID ‡πÅ‡∏•‡∏∞ address

4. **‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ Mint**

---

## üìä ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö

| ‡∏Å‡∏£‡∏ì‡∏µ | FID Source | Sign In ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô? | Mint ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢? |
|------|------------|----------------|--------------|
| **Mini App** | SDK Context (‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥) | ‚ùå ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á | ‚úÖ ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ |
| **Browser** | Sign In (‡∏ï‡πâ‡∏≠‡∏á verify) | ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á | ‚ùå ‡∏ï‡πâ‡∏≠‡∏á Sign In ‡∏Å‡πà‡∏≠‡∏ô |

---

## üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Mini App ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

### ‡πÉ‡∏ô Console Log:
```
[Mint] isInMiniApp: true  ‚Üê ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Mini App
[Mint] isInMiniApp: false ‚Üê ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Browser
```

### ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î:
```typescript
const inMini = await sdk.isInMiniApp();
if (inMini) {
  // ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô Mini App ‚Üí ‡∏î‡∏∂‡∏á FID ‡∏à‡∏≤‡∏Å context
  const ctx = await sdk.context;
  const fid = ctx?.user?.fid;
}
```

---

## ‚úÖ ‡∏™‡∏£‡∏∏‡∏õ

**‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô Farcaster Mini App:**
- ‚úÖ ‡πÑ‡∏î‡πâ FID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Sign In
- ‚úÖ Mint ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!

**‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô Browser:**
- ‚ùå ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ FID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á Sign In ‡∏Å‡πà‡∏≠‡∏ô
- ‚úÖ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ Mint

---

## üéØ Best Practice

**‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏ú‡πà‡∏≤‡∏ô Farcaster Mini App** ‡πÄ‡∏û‡∏£‡∏≤‡∏∞:
1. UX ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Sign In)
2. ‡πÄ‡∏£‡πá‡∏ß‡∏Å‡∏ß‡πà‡∏≤ (‡πÑ‡∏î‡πâ FID ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
3. ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤ (‡πÉ‡∏ä‡πâ context ‡∏à‡∏≤‡∏Å Farcaster)

